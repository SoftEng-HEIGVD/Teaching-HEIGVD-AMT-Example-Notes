SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";

CREATE DATABASE IF NOT EXISTS `amt_notes`;

DROP TABLE IF EXISTS `amt_notes`;
CREATE TABLE `amt_notes` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `CONTENT` mediumtext CHARACTER SET latin1,
  `AUTHOR_USERNAME` varchar(255) CHARACTER SET latin1 NOT NULL,
  `IS_DELETED` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  KEY `FK_AUTHOR_ID_idx` (`AUTHOR_USERNAME`),
  CONSTRAINT `FK_AUTHOR_USERNAME` FOREIGN KEY (`AUTHOR_USERNAME`) REFERENCES `amt_users` (`USERNAME`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=10000 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

DROP TABLE IF EXISTS `amt_users`;
CREATE TABLE `amt_users` (
  `USERNAME` varchar(255) NOT NULL,
  `FIRST_NAME` varchar(255) NOT NULL,
  `LAST_NAME` varchar(255) NOT NULL,
  `EMAIL` varchar(255) DEFAULT NULL,
  `HASHED_PW` char(128) NOT NULL,
  PRIMARY KEY (`USERNAME`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
